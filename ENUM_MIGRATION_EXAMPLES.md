# Enum Migration Examples

This file demonstrates how the new string union types + const objects pattern works and its benefits.

## Migration Pattern

All TypeScript enums have been migrated to string union types combined with const objects:

```typescript
// Before (Enum)
export enum ButtonSize {
  Sm = 'sm',
  Md = 'md',
  Lg = 'lg',
}

// After (String Union Type + Const Object)
export type ButtonSize = 'sm' | 'md' | 'lg';
export const ButtonSize = {
  Sm: 'sm',
  Md: 'md',
  Lg: 'lg',
} as const;
```

## Benefits

### 1. **Structural Typing** - Accepts values from any source

```typescript
import { ButtonSize } from '@metamask/design-system-react';

// ✅ All of these work now!
const size1: ButtonSize = 'sm'; // String literal
const size2: ButtonSize = ButtonSize.Md; // Const object property
const size3: ButtonSize = ButtonBaseSize.Lg; // Still works with old imports
```

### 2. **No Dual Props Needed** - Single prop type works everywhere

```typescript
// Before: Needed dual props for migration
interface ButtonProps {
  size?: ButtonSizeLegacy | string;
  // or worse:
  sizeLegacy?: ButtonSizeLegacy;
  sizeNew?: string;
}

// After: Single prop works with everything
interface ButtonProps {
  size?: ButtonSize; // Accepts 'sm' | ButtonSize.Sm | old enum values
}
```

### 3. **Better Developer Experience**

```typescript
// ✅ No import needed for simple cases
<Button size="md">Click me</Button>

// ✅ Import for autocomplete
import { ButtonSize } from '@metamask/design-system-react';
<Button size={ButtonSize.Md}>Click me</Button>

// ✅ Clearer type errors
const invalidSize: ButtonSize = 'xl';  // Error: Type '"xl"' is not assignable to type '"sm" | "md" | "lg"'
```

### 4. **Backward Compatible**

```typescript
// All existing code continues to work!
import { ButtonBaseSize } from '@metamask/design-system-react';

// These all still work:
<ButtonBase size={ButtonBaseSize.Sm}>Button</ButtonBase>
<ButtonBase size="sm">Button</ButtonBase>
Object.keys(ButtonBaseSize)  // Works in Storybook controls
```

## Usage Examples

### Using String Literals (No Import Needed)

```tsx
import { Button } from '@metamask/design-system-react';

function MyComponent() {
  return (
    <Button size="md" variant="primary">
      Click me
    </Button>
  );
}
```

### Using Const Object (With Autocomplete)

```tsx
import {
  Button,
  ButtonSize,
  ButtonVariant,
} from '@metamask/design-system-react';

function MyComponent() {
  return (
    <Button size={ButtonSize.Md} variant={ButtonVariant.Primary}>
      Click me
    </Button>
  );
}
```

### Using in Storybook Controls

```tsx
import { ButtonBaseSize } from '@metamask/design-system-react';

// In your story argTypes:
argTypes: {
  size: {
    control: 'select',
    options: Object.keys(ButtonBaseSize),  // ✅ Still works!
    mapping: ButtonBaseSize,                // ✅ Still works!
  },
}
```

### Type-Safe Functions

```tsx
import { ButtonSize } from '@metamask/design-system-react';

// Function parameter accepts all valid values
function getButtonClasses(size: ButtonSize) {
  switch (size) {
    case 'sm':
      return 'btn-small';
    case 'md':
      return 'btn-medium';
    case 'lg':
      return 'btn-large';
  }
}

// All of these work:
getButtonClasses('sm'); // ✅ String literal
getButtonClasses(ButtonSize.Md); // ✅ Const object property
```

## Migrated Types

The following types have been migrated in both `@metamask/design-system-react` and `@metamask/design-system-react-native`:

- **Avatar**: AvatarBaseSize, AvatarShape, AvatarAccountVariant, AvatarIconSeverity, AvatarGroupVariant
- **Badge**: BadgeCountSize, BadgeStatusStatus, BadgeStatusSize, BadgeWrapperPositionAnchorShape, BadgeWrapperPosition
- **Box**: BoxFlexDirection, BoxFlexWrap, BoxAlignItems, BoxJustifyContent, BoxBackgroundColor, BoxBorderColor
- **Button**: ButtonBaseSize, ButtonVariant, ButtonIconSize
- **Text**: TextVariant, TextColor, TextAlign, FontWeight, OverflowWrap, FontStyle, TextTransform, FontFamily, TextButtonSize
- **Icon**: IconSize, IconColor

**Note**: `IconName` enum remains unchanged as it is autogenerated.

## Why This Change?

The migration from enums to string union types + const objects eliminates the "dual prop system" problem that occurred when migrating components between packages. Even when enum values were identical, TypeScript treated different enum types as incompatible due to nominal typing.

With the new pattern:

- ✅ No migration friction between packages
- ✅ Direct string literal support
- ✅ Backward compatible with existing enum usage
- ✅ Better autocomplete and type errors
- ✅ Structural typing instead of nominal typing
